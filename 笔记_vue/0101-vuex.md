# Vuex 使用

* 多 vue 组件公用数据，使用 vuex 来保存

## 实例

```
var store_a = new Vuex.Store( {
    state : {
        key_a : 'hello'
    }
} );

var store_b = new Vuex.Store( {
    state : {
        key_b : 123
    }
} );

var plugin_a = function( store ) {

    // 当 store 初始化后调用
    store.subscribe( function( mutation, state ) {

        // 每次 mutation 之后调用
        // mutation 的格式为 { type, payload }
        console.log( mutation );
    } );
};

var store_app = new Vuex.Store( {

    // 存值、取值
    state : {
        count : 0
    },

    // 用于设值（仅同步设值）
    mutations : {
        increment : function( state, new_num ) {
            state.count += new_num;
        }
    },

    // 倾向于获取组合值或一些复合值（类似 vue 的 computed 用法）
    getters : {
        countMore : function( state, getters, rootState ) {
            return state.count + 1;
        }
    },

    // 用于经过一系列的行为来促发 mutations
    actions : {
        incrementAsync : function( context, msg ) {
            setTimeout( function() {
                context.commit( 'increment' );
            }, 1000 );
        }
    },

    // 加载其他 store 作为其子模块
    modules : {
        a : store_a,
        b : store_b
    },

    // 加载插件
    plugins : [ plugin_a ]
} );

store.commit( 'increment', 100 );

store.dispatch( 'incrementAsync', 'hello world' );
```

## 参考资源

* [官网](https://vuex.vuejs.org/zh-cn/)